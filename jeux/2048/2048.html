<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üé≤ 2048</title>
  <style>
    body {
      margin: 0;
      background: #ffe6f0;
      font-family: Arial, sans-serif;
      text-align: center;
    }

    #menuBtn {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 24px;
      z-index: 1000;
      cursor: pointer;
    }

    #sidebar {
      z-index: 1000;
    }

    h1 {
      margin-top: 50px;
      color: #e60073;
    }

    #game-container {
      margin: 20px auto;
      width: 320px;
      height: 320px;
      background: #bbada0;
      border-radius: 10px;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      grid-template-rows: repeat(4, 1fr);
      gap: 5px;
      padding: 5px;
    }

    .tile {
      width: 70px;
      height: 70px;
      background: #cdc1b4;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      font-size: 24px;
      border-radius: 5px;
      transition: all 0.2s;
    }

    #score {
      font-size: 20px;
      font-weight: bold;
      color: #e60073;
      margin: 10px 0;
      background: white;
      padding: 5px 15px;
      border-radius: 10px;
      display: inline-block;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
  </style>
</head>
<link rel="stylesheet" href="../../style.css">
<body>
  <!-- Bouton menu -->
  <div id="menuBtn">‚ò∞</div>

  <!-- Sidebar -->
  <nav id="sidebar">
    <a href="../../index.html">üè† Accueil</a>
    <a href="../../videos.html">üé¨ Vid√©os</a>
    <a href="../../jeux.html">üéÆ Jeux</a>
    <a href="../../musiques.html">üéµ Musiques</a>
    <a href="../../liens.html">üåç Liens</a>
  </nav>

  <h1>üé≤ Jeu 2048</h1>
  <div id="score">Score : 0</div>
  <div id="game-container"></div>

  <script>
    const container = document.getElementById("game-container");
    const size = 4;
    let grid = [];
    let score = 0;

    function initGame() {
      grid = Array(size).fill().map(() => Array(size).fill(0));
      score = 0;
      updateScore();
      addNumber();
      addNumber();
      drawGrid();
    }

    function addNumber() {
      let empty = [];
      for (let i = 0; i < size; i++) {
        for (let j = 0; j < size; j++) {
          if (grid[i][j] === 0) empty.push({x:i, y:j});
        }
      }
      if (empty.length === 0) return;
      let spot = empty[Math.floor(Math.random() * empty.length)];
      grid[spot.x][spot.y] = Math.random() < 0.9 ? 2 : 4;
    }

    function drawGrid() {
      container.innerHTML = "";
      for (let i = 0; i < size; i++) {
        for (let j = 0; j < size; j++) {
          const tile = document.createElement("div");
          tile.classList.add("tile");
          let value = grid[i][j];
          if (value !== 0) {
            tile.textContent = value;
            tile.style.background = getColor(value);
          }
          container.appendChild(tile);
        }
      }
    }

    function getColor(value) {
      const colors = {
        2: "#eee4da",
        4: "#ede0c8",
        8: "#f2b179",
        16: "#f59563",
        32: "#f67c5f",
        64: "#f65e3b",
        128: "#edcf72",
        256: "#edcc61",
        512: "#edc850",
        1024: "#edc53f",
        2048: "#edc22e"
      };
      return colors[value] || "#3c3a32";
    }

    function slide(row) {
      row = row.filter(val => val);
      for (let i = 0; i < row.length-1; i++) {
        if (row[i] === row[i+1]) {
          row[i] *= 2;
          score += row[i];
          row[i+1] = 0;
        }
      }
      row = row.filter(val => val);
      while (row.length < size) row.push(0);
      return row;
    }

    function moveLeft() {
      let moved = false;
      for (let i = 0; i < size; i++) {
        let newRow = slide(grid[i]);
        if (grid[i].toString() !== newRow.toString()) moved = true;
        grid[i] = newRow;
      }
      if (moved) {
        addNumber();
        drawGrid();
        updateScore();
      }
    }

    function moveRight() {
      let moved = false;
      for (let i = 0; i < size; i++) {
        let row = grid[i].slice().reverse();
        let newRow = slide(row).reverse();
        if (grid[i].toString() !== newRow.toString()) moved = true;
        grid[i] = newRow;
      }
      if (moved) {
        addNumber();
        drawGrid();
        updateScore();
      }
    }

    function moveUp() {
      let moved = false;
      for (let j = 0; j < size; j++) {
        let col = [];
        for (let i = 0; i < size; i++) col.push(grid[i][j]);
        let newCol = slide(col);
        for (let i = 0; i < size; i++) {
          if (grid[i][j] !== newCol[i]) moved = true;
          grid[i][j] = newCol[i];
        }
      }
      if (moved) {
        addNumber();
        drawGrid();
        updateScore();
      }
    }

    function moveDown() {
      let moved = false;
      for (let j = 0; j < size; j++) {
        let col = [];
        for (let i = 0; i < size; i++) col.push(grid[i][j]);
        let newCol = slide(col.reverse()).reverse();
        for (let i = 0; i < size; i++) {
          if (grid[i][j] !== newCol[i]) moved = true;
          grid[i][j] = newCol[i];
        }
      }
      if (moved) {
        addNumber();
        drawGrid();
        updateScore();
      }
    }

    function updateScore() {
      document.getElementById("score").textContent = "Score : " + score;
    }

    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft") moveLeft();
      else if (e.key === "ArrowRight") moveRight();
      else if (e.key === "ArrowUp") moveUp();
      else if (e.key === "ArrowDown") moveDown();
    });

    initGame();
  </script>
  <script src="../../menu.js"></script>
</body>
</html>
